#!/bin/bash

echo "ğŸ†“ SENDGRID GRATUIT - Configuration rapide"
echo "=========================================="
echo ""
echo "âœ… 100% gratuit"
echo "âœ… Pas de carte bancaire"
echo "âœ… 100 emails/jour"
echo "âœ… Configuration en 5 minutes"
echo ""

# 1. Instructions d'inscription
echo "ğŸ“ Ã‰TAPE 1 - Inscription SendGrid (2 minutes) :"
echo "------------------------------------------------"
echo "1. Allez sur â†’ https://signup.sendgrid.com/"
echo "2. Inscrivez-vous avec votre email"
echo "3. Confirmez votre email dans votre boÃ®te mail"
echo "4. Connectez-vous au dashboard"
echo ""

# 2. Instructions API Key
echo "ğŸ”‘ Ã‰TAPE 2 - CrÃ©ation API Key (1 minute) :"
echo "--------------------------------------------"
echo "1. Dans le dashboard SendGrid :"
echo "   â†’ Settings â†’ API Keys"
echo "2. Cliquez 'Create API Key'"
echo "3. Nom : 'Projet5IW'"
echo "4. Permissions : 'Full Access'"
echo "5. Cliquez 'Create & Review'"
echo "6. COPIEZ la clÃ© gÃ©nÃ©rÃ©e (commence par SG.)"
echo ""

# 3. Configuration .env
echo "âš™ï¸  Ã‰TAPE 3 - Configuration .env :"
echo "-----------------------------------"
echo "Ã‰ditez le fichier :"
echo "   /Users/youri/Desktop/Projet-5IW/backend/.env"
echo ""
echo "Remplacez cette ligne :"
echo "   SENDGRID_API_KEY=votre-api-key-sendgrid"
echo ""
echo "Par votre vraie clÃ© :"
echo "   SENDGRID_API_KEY=SG.votre-vraie-cle-ici"
echo ""

# 4. Test local
echo "ğŸ§ª Ã‰TAPE 4 - Test local :"
echo "--------------------------"
echo "AprÃ¨s avoir modifiÃ© .env, lancez :"
echo "   cd /Users/youri/Desktop/Projet-5IW/backend"
echo "   node test-sendgrid.js"
echo ""
echo "RÃ©sultat attendu :"
echo "   ğŸ‰ EMAIL SENDGRID ENVOYÃ‰ AVEC SUCCÃˆS !"
echo ""

# 5. DÃ©ploiement production
echo "ğŸš€ Ã‰TAPE 5 - DÃ©ploiement production :"
echo "--------------------------------------"
echo "1. npm run build"
echo "2. Sur le serveur :"
echo "   ssh root@educareschool.me"
echo "   cd /home/github/projet5iw/projet5iw-deploy"
echo "   echo 'SENDGRID_API_KEY=SG.votre-cle' >> .env"
echo "   docker-compose down nest"
echo "   docker-compose build nest"
echo "   docker-compose up -d nest"
echo ""

echo "âœ… C'est tout ! SendGrid est maintenant configurÃ©."
echo "ğŸ’¡ Avantages : Gratuit, fiable, contourne tous les blocages SMTP"
echo ""
echo "â“ Des questions ? Lancez ce script et suivez les Ã©tapes !" 